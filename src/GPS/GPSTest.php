<?php

namespace GPS;

class GPSTest
{
  public static function world()
  {
    return 'Hello World, Composer!';
  }

  public static function getData()
  {
    $gpString = self::randomizeFakeGPS(true);
    $values = "https://tools4teams.pl/listen.php?imei=868159054639999&serial_num=1117979999 HTTP/1.1Host: 34.118.79.170Accept: */*Content-Type: application/vnd.teltonika.nmeaContent-Length: 792\$GNGNS,072641.00,5210.183053,N,02030.826390,E,AAN,14,0.8,96.8,37.0,,,V*59\$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A$gpString\$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\$GPGSV,4,1,15,01,73,292,46,03,45,254,51,08,20,188,44,10,06,071,40,1*60\$GPGSV,4,2,15,17,25,313,45,19,00,330,36,21,75,151,39,22,55,094,35,1*6F\$GPGSV,4,3,15,31,08,116,32,32,38,057,44,04,01,199,,14,06,279,,1*69\$GPGSV,4,4,15,36,,,46,40,,,38,49,,,41,1*60\$GPGGA,072642.00,5210.183053,N,02030.826389,E,1,08,0.8,96.8,M,37.0,M,,*5F";
    
    return $values;

  }

  public static function getData2($imei = "868159054639999", $serial_num = "1117979999" , $big)
  {
    $gpString = self::randomizeFakeGPS($big);
    $values = "imei=$imei&serial_num=$serial_num GNGNS,072641.00,5210.183053,N,02030.826390,E,AAN,14,0.8,96.8,37.0,,,V*59\$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A$gpString\$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\$GPGSV,4,1,15,01,73,292,46,03,45,254,51,08,20,188,44,10,06,071,40,1*60\$GPGSV,4,2,15,17,25,313,45,19,00,330,36,21,75,151,39,22,55,094,35,1*6F\$GPGSV,4,3,15,31,08,116,32,32,38,057,44,04,01,199,,14,06,279,,1*69\$GPGSV,4,4,15,36,,,46,40,,,38,49,,,41,1*60\$GPGGA,072642.00,5210.183053,N,02030.826389,E,1,08,0.8,96.8,M,37.0,M,,*5F";
    
    return $values;

  }
  public static function sendData()
  {
    //Przykłady danych do wysłania
    // listen.php?imei=868159054635821&serial_num=1117979522 HTTP/1.1\r\nHost: 34.118.79.170\r\nAccept: */*\r\nContent-Type: application/vnd.teltonika.nmea\r\nContent-Length: 792\r\n\r\n$GNGNS,072641.00,5210.183053,N,02030.826390,E,AAN,14,0.8,96.8,37.0,,,V*59\n$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A\n$GPRMC,072641.00,A,5210.183053,N,02030.826390,E,0.0,,111022,3.3,E,A,V*6B\n$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\n$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\n$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\n$GPGSV,4,1,15,01,73,292,46,03,45,254,51,08,20,188,44,10,06,071,40,1*60\n$GPGSV,4,2,15,17,25,313,45,19,00,330,36,21,75,151,39,22,55,094,35,1*6F\n$GPGSV,4,3,15,31,08,116,32,32,38,057,44,04,01,199,,14,06,279,,1*69\n$GPGSV,4,4,15,36,,,46,40,,,38,49,,,41,1*60\n$GPGGA,072642.00,5210.183053,N,02030.826389,E,1,08,0.8,96.8,M,37.0,M,,*5F\n
    //[Tue Oct 11 07:26:48.087242 2022] [php7:notice] [pid 17526] [client 5.185.241.204:46190] POST /listen.php?imei=868159054635821&serial_num=1117979522 HTTP/1.1\r\nHost: 34.118.79.170\r\nAccept: */*\r\nContent-Type: application/vnd.teltonika.nmea\r\nContent-Length: 794\r\n\r\n$GNGNS,072647.00,5210.183053,N,02030.826388,E,AAN,14,0.8,96.8,37.0,,,V*56\n$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A\n$GPRMC,072647.00,A,5210.183053,N,02030.826388,E,0.0,,111022,3.3,E,A,V*64\n$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\n$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\n$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\n$GPGSV,4,1,15,01,73,292,46,03,45,254,50,04,01,199,29,08,20,188,45,1*6A\n$GPGSV,4,2,15,10,06,071,41,17,25,313,43,19,00,330,34,21,75,151,40,1*6A\n$GPGSV,4,3,15,22,55,094,36,31,08,116,36,32,38,057,45,14,06,279,,1*60\n$GPGSV,4,4,15,36,,,46,40,,,39,49,,,41,1*61\n$GPGGA,072648.00,5210.183053,N,02030.826387,E,1,08,0.8,96.8,M,37.0,M,,*5B\n
    //[Tue Oct 11 07:26:54.107786 2022] [php7:notice] [pid 20218] [client 5.185.241.204:46191] POST /listen.php?imei=868159054635821&serial_num=1117979522 HTTP/1.1\r\nHost: 34.118.79.170\r\nAccept: */*\r\nContent-Type: application/vnd.teltonika.nmea\r\nContent-Length: 796\r\n\r\n$GNGNS,072653.00,5210.183053,N,02030.826385,E,AAN,15,0.7,96.8,37.0,,,V*50\n$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A\n$GPRMC,072653.00,A,5210.183053,N,02030.826385,E,0.0,,111022,3.3,E,A,V*6C\n$GPGSA,A,2,01,03,08,10,14,17,21,22,32,,,,1.0,0.7,0.7,1*25\n$GNGSA,A,2,01,03,08,10,14,17,21,22,32,,,,1.0,0.7,0.7,1*3B\n$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.7,0.7,2*34\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.7,0.7,3*33\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.7,0.7,4*34\n$GNGSA,A,2,,,,,,,,,,,,,1.0,0.7,0.7,5*35\n$GPGSV,4,1,15,01,73,292,46,03,45,254,50,08,20,188,44,10,06,071,39,1*6F\n$GPGSV,4,2,15,17,25,313,43,19,00,330,33,21,75,151,40,22,55,094,36,1*61\n$GPGSV,4,3,15,31,08,116,33,32,38,057,43,04,01,199,,14,06,279,,1*6F\n$GPGSV,4,4,15,36,,,46,40,,,38,49,,,39,1*6F\n$GPGGA,072654.00,5210.183053,N,02030.826384,E,1,09,0.7,96.8,M,37.0,M,,*5B\n
    $gpString = self::randomizeFakeGPS(true);
    $values = "https://tools4teams.pl/listen.php?imei=868159054639999&serial_num=1117979999 HTTP/1.1Host: 34.118.79.170Accept: */*Content-Type: application/vnd.teltonika.nmeaContent-Length: 792\$GNGNS,072641.00,5210.183053,N,02030.826390,E,AAN,14,0.8,96.8,37.0,,,V*59\$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A$gpString\$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\$GPGSV,4,1,15,01,73,292,46,03,45,254,51,08,20,188,44,10,06,071,40,1*60\$GPGSV,4,2,15,17,25,313,45,19,00,330,36,21,75,151,39,22,55,094,35,1*6F\$GPGSV,4,3,15,31,08,116,32,32,38,057,44,04,01,199,,14,06,279,,1*69\$GPGSV,4,4,15,36,,,46,40,,,38,49,,,41,1*60\$GPGGA,072642.00,5210.183053,N,02030.826389,E,1,08,0.8,96.8,M,37.0,M,,*5F";
    header("Location: " . $values);
    return $values;
  }
  public static function randomizeFakeGPS(bool $big = false)
  {
    $treshN = rand(10, 99);
    $treshE = rand(10, 99);
    $treshEBE = rand(1000, 9999);
    $treshEBN = rand(1000, 9999);
    if ($big) {
      return  '$GPRMC,192159.00,A,5210.' . $treshEBE . $treshN . ',N,02030.' . $treshEBN . $treshE . ',E,0.0,,031022,3.3,E,A,V*6F';
    }
    return  '$GPRMC,192159.00,A,5210.1831' . $treshN . ',N,02030.8266' . $treshE . ',E,0.0,,031022,3.3,E,A,V*6F';
  }

  public static function getFakeGPRMC($lat, $lng)
  {
    $lat1 = GPSDecode::calcDECtoDMS($lat,'lattitude');
    $lng1 = GPSDecode::calcDECtoDMS($lng,'longitude');
    return  '$GPRMC,192159.00,A,'.$lat1. ',N,'.$lng1. ',E,0.0,,031022,3.3,E,A,V*6F';
  }

  public static function getFakeGPSRAWHeaders($imei, $serial_nr, $lat, $lng)
  {
    $gpString = self::getFakeGPRMC($lat, $lng);
    $values = "imei=$imei&serial_num=$serial_nr HTTP/1.1Host: 34.118.79.170Accept: */*Content-Type: application/vnd.teltonika.nmeaContent-Length: 792\$GNGNS,072641.00,5210.183053,N,02030.826390,E,AAN,14,0.8,96.8,37.0,,,V*59\$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A$gpString\$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\$GPGSV,4,1,15,01,73,292,46,03,45,254,51,08,20,188,44,10,06,071,40,1*60\$GPGSV,4,2,15,17,25,313,45,19,00,330,36,21,75,151,39,22,55,094,35,1*6F\$GPGSV,4,3,15,31,08,116,32,32,38,057,44,04,01,199,,14,06,279,,1*69\$GPGSV,4,4,15,36,,,46,40,,,38,49,,,41,1*60\$GPGGA,072642.00,5210.183053,N,02030.826389,E,1,08,0.8,96.8,M,37.0,M,,*5F";
    //header("Location: " . $values);
    return $values;
  }
  public static function getFakeGPS($imei, $serial_nr, $lat, $lng)
  {
    $gpString = self::getFakeGPRMC($lat, $lng);
    $values = "https://tools4teams.pl/listen.php?imei=$imei&serial_num=$serial_nr HTTP/1.1Host: 34.118.79.170Accept: */*Content-Type: application/vnd.teltonika.nmeaContent-Length: 792\$GNGNS,072641.00,5210.183053,N,02030.826390,E,AAN,14,0.8,96.8,37.0,,,V*59\$GPVTG,,T,356.7,M,0.0,N,0.0,K,A*0A$gpString\$GPGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*2F\$GNGSA,A,2,01,03,08,10,17,21,22,32,,,,,1.0,0.8,0.7,1*31\$GNGSA,A,2,69,70,77,78,84,85,,,,,,,1.0,0.8,0.7,2*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,3*3C\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,4*3B\$GNGSA,A,2,,,,,,,,,,,,,1.0,0.8,0.7,5*3A\$GPGSV,4,1,15,01,73,292,46,03,45,254,51,08,20,188,44,10,06,071,40,1*60\$GPGSV,4,2,15,17,25,313,45,19,00,330,36,21,75,151,39,22,55,094,35,1*6F\$GPGSV,4,3,15,31,08,116,32,32,38,057,44,04,01,199,,14,06,279,,1*69\$GPGSV,4,4,15,36,,,46,40,,,38,49,,,41,1*60\$GPGGA,072642.00,5210.183053,N,02030.826389,E,1,08,0.8,96.8,M,37.0,M,,*5F";
    //header("Location: " . $values);
    return $values;
  }
}
